# _Understanding a lexer program_
So to generate a lexical analyzer, FLEX (fast lexical analyzer generator) is used.

The extension of a lex program is **.l** <br/>
The function **yylex()** is automatically generated by flex when there is a **.l** extension


>The function yylex() is the main flex function that runs the Rule Section in the lex program, and parser expects this function, to call to retrieve tokens
---
<br/>

### The lex program has three sections:
- Definitions - contains the declaration of variables
- Rules - contains patterns and its coresponding action 
- User code section - contains C statements and other function

<br/>

Synatx for definition: 
>Imp: Anything written in the defition section is copied in the lex.yy.c file

```
%{
   // Definitions
%}
```

Synatx for rule:
```
%%
pattern  action
%%
```

Syntax for user code section:
```
%{
// Definitions
%}

%%
Rules
%%

User code section  // int main() //many other functions
```
---
<br/>

### Some important functions and terms in the lex program:
- **yywrap()** - wraps the rule section
- **yylex()** - this is the main flex function which runs the Rule Section
- **yytext** - It is the text in the buffer
- **yyin** - takes the file pointer which contains the input

<br/>

Example of a lexer program: Counting no.of uppercase and lowercase letters

<br/>


```C

/* Definition Section*/
%{

int ctu = 0;
int ctl = 0;

%}

/*Rules Section*/
%%

[A-Z] {printf("%s uppercase\n", yytext); ctu++;}
[a-z] {printf("%s lowercase\n", yytext); ctl++;}
.     {printf("%s not an alphabet\n", yytext);}
\n    {return 0;}

%%

/*Code section*/ 
int yywrap(){}

int main(){

yylex();
printf("No.of uppercase: %d\n", ctu);
printf("No.of lowercase: %d\n", ctl);
  
return 0;
}


```
<br/>

### Working of FLEX:
1) A file with extension **.l** describes the lexical analyzer to be generated
2) The lex compiler converts this .l file to a C program in a file that is always called ` lex.yy.c`
3) The C compiler complies lex.yy.c into an executable `a.out`
4) This a.out takes in stream of words and gives out tokens

![flex](/images/flex.jpeg)

---

Running a lex program:
- If the filename is lexer.l, the first command will be : `lex lexer.l`
- Next command : `gcc lex.yy.c`
- Followed by : `./a.out`






